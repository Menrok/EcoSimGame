@page "/"
@inject NavigationManager Navigation
@inject Services.GameStateService game

<h1>Economy Simulator Game</h1>

<div class="intro-text">
    <p>🌿 Witaj w świecie Economy Simulator Game!</p>
    <p>👉 Kupuj surowce, przetwarzaj je w towary, sprzedawaj na rynku, ulepszaj swoje magazyny i badaj nowe technologie.</p>
    <p>🔧 Zbuduj swoje ekonomiczne imperium krok po kroku!</p>
</div>

<div class="name-entry">
    <label for="playerName">Podaj swoją nazwę:</label>
    <input id="playerName" @bind="playerName" placeholder="Twoja nazwa" />
    <button class="confirm-button" @onclick="ConfirmName" disabled="@string.IsNullOrWhiteSpace(playerName)">Zatwierdź</button>
</div>

@code {
    private string playerName = "";
    private bool isNameEntered = false;

    private async Task ConfirmName()
    {
        if (!string.IsNullOrWhiteSpace(playerName))
        {
            game.Player.Name = playerName;
            await game.Save();
            isNameEntered = true;
        }
    }

    protected override void OnInitialized()
    {
        playerName = game.Player.Name;
    }

    private void StartGame()
    {
        Navigation.NavigateTo("/Shop");
    }
}